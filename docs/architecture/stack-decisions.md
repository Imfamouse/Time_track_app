# Выбор технологического стека

## Общая стратегия
Система разрабатывается как модульное клиент-серверное веб-приложение. Бэкенд и фронтенд развиваются независимо, взаимодействуя по REST/JSON и GraphQL (для агрегированных отчётов). Все сервисы упаковываются в Docker-контейнеры и деплоятся на Windows Server 2012 R2 через Docker Desktop Enterprise.

## Backend
- **Язык и рантайм**: Python 3.12 (совместим с Windows Server 2012 R2 при установке необходимого VC++ Redistributable).
- **Веб-фреймворк**: FastAPI + Uvicorn с поддержкой ASGI для асинхронной обработки запросов.
- **ORM/слой доступа к данным**: SQLAlchemy 2.x + Alembic для миграций схемы PostgreSQL.
- **Валидаторы и схемы**: Pydantic v2.
- **Аутентификация**: интеграция с корпоративным SSO через протокол Kerberos/NTLM. Для разработки — заглушка на основе JWT.
- **Логирование и мониторинг**: structlog + OpenTelemetry SDK (экспорт в Prometheus/Jaeger по мере развёртывания).

## Frontend
- **Язык**: TypeScript 5.x.
- **Фреймворк**: React 18 с Vite в качестве сборщика.
- **UI-библиотека**: Ant Design 5 — покрывает корпоративный десктопный UX.
- **Состояние**: Redux Toolkit + RTK Query для общения с API.
- **Тестирование**: Vitest + React Testing Library.

## Общие инструменты
- **База данных**: PostgreSQL 16.
- **Контейнеризация**: Docker Compose для локального окружения, с перспективой переноса в корпоративный Kubernetes.
- **Пакетные менеджеры**: `uv` для Python зависимостей, `pnpm` для фронтенда.
- **Документация**: MkDocs Material (будет оформлено в следующей фазе).

## Обоснование выбора
- FastAPI и React обеспечивают быстрое прототипирование и соответствуют требованиям по десктопному веб-интерфейсу.
- Python и TypeScript имеют зрелую экосистему и совместимы с инфраструктурой заказчика.
- Docker позволяет единообразно поставлять окружение разработчикам и на сервер.
- PostgreSQL удовлетворяет требованиям к транзакционной целостности и поддерживает сложные отчётные запросы.

## Ограничения и допущения
- Корпоративный SSO будет интегрирован через отдельный шлюз, на этапе разработки используется mock-служба.
- Windows Server 2012 R2 требует ручного обновления сертификатов и VC++ библиотек; учитываем в плане развёртывания.
- Использование GraphQL ограничено чтением; операции записи реализуются через REST.
